define("ui/collapse",["jquery"],function($){var SHOW=!0,HIDE=!1,defaultOptions={according:!0,allowDisabled:!1,activeClass:"active",show:function(content){return content.show()},hide:function(content){return content.hide()},useCustomShowAndHide:!1,toggle:function(content){var options=this.options;return content[options.toggleType](options.toggleDuration)},toggleType:"toggle",toggleDuration:null},autoSplit=function(obj){return obj instanceof jQuery?obj.map(function(){return $(this)}):void 0},Collapse=function(handlers,contents,options){this.options=$.extend({},defaultOptions,options),this.activeClass=this.options.activeClass,this.allowDisabled=this.options.allowDisabled,this.handlers=handlers,this.contents=contents,this.transitioning={},this.listen()};return Collapse.fromAutoSplit=function(handlers,contents,options){return new Collapse(autoSplit(handlers),autoSplit(contents),options)},$.extend(Collapse.prototype,{listen:function(){var self=this;$.each(this.handlers,function(handlerIndex,elem){var handler=$(elem);handler.on("click",function(){if(!self.allowDisabled||!handler.hasClass("disabled")){var isOpened=handler.hasClass(self.activeClass);if(!self.transitioning[handlerIndex])return isOpened?self.close(handlerIndex):(self.open(handlerIndex),void 0)}});var content=self.contents[handlerIndex];content.on("close.self",$.proxy(self.hideAll,self))})},findActived:function(callBack){var self=this;$.each(this.handlers,function(index,handler){var transitioning=self.transitioning[index],isActived=handler.hasClass(self.activeClass);transitioning&&isActived||(isActived||transitioning)&&callBack.call(self,index)})},close:function(handlerIndex){this.action(handlerIndex,HIDE)},open:function(handlerIndex){this.options.according&&this.hideAll(),this.action(handlerIndex,SHOW)},getActionFn:function(showOrHide){return this.options.useCustomShowAndHide?this.options[showOrHide?"show":"hide"]:this.options.toggle},action:function(handlerIndex,showOrHide){var content=this.contents[handlerIndex],handler=this.handlers[handlerIndex],transitioning=this.transitioning[handlerIndex],actionType=showOrHide?"expand":"collapse",action=this.getActionFn(showOrHide),self=this;transitioning&&content.stop(),this.transitioning[handlerIndex]=!0,action.call(this,content).promise().done(function(){handler[showOrHide?"addClass":"removeClass"](self.activeClass),content.trigger("action:"+actionType,content).trigger("action:toggle",[content,actionType]),self.transitioning[handlerIndex]=!1})},hideAll:function(){this.findActived(this.close)},disableHandlers:function(){$.each(this.handlers,function(index,handler){handler.addClass("disabled")})}}),Collapse});